<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sowellian Governance v5</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown.min.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css"/>
  <style>
    .markdown-body {
      box-sizing: border-box;
      min-width: 200px;
      max-width: 980px;
      margin: 0 auto;
      padding: 45px;
    }
    @media (max-width: 767px) {
      .markdown-body { padding: 15px; }
    }
    img { max-width: 100%; height: auto; }
  </style>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "headline": "Sowellian Governance v5",
    "author": {"@type":"Person","name":"BobTheGrownup"},
    "datePublished": "2025-10-28",
    "description": "A DAO governance system that ties proposals to KPIs, enforces skin-in-the-game via bonds and one-way bets, and grows treasuries with a 1% rake.",
    "keywords": ["Sowellian Governance","prediction markets","DAO","KPIs","skin-in-the-game"],
    "url": "https://bobthegrownup.github.io/SowellianGovernance/"
  }
  </script>
</head>
<body>
  <article class="markdown-body" id="content">
    <div style="text-align:center; padding: 20px;">
      <h1>Loading Sowellian Governance v5...</h1>
      <p><em>Fetching from GitHub...</em></p>
    </div>
  </article>

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
  <script>
    // Fetch README.md
    fetch('https://api.github.com/repos/bobthegrownup/SowellianGovernance/contents/README.md')
      .then(r => r.json())
      .then(data => atob(data.content))
      .then(md => {
        // Replace image paths: ![alt](image.png) â†’ ![alt](https://raw.githubusercontent.com/.../image.png)
        md = md.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, (match, alt, src) => {
          if (src.startsWith('http')) return match;
          const full = `https://raw.githubusercontent.com/bobthegrownup/SowellianGovernance/main/${src}`;
          return `![${alt}](${full})`;
        });
        const html = marked.parse(md);
        document.getElementById('content').innerHTML = html;
        // Render LaTeX
        renderMathInElement(document.getElementById('content'), {
          delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "$", right: "$", display: false},
            {left: "\\[", right: "\\]", display: true},
            {left: "\\(", right: "\\)", display: false}
          ]
        });
      })
      .catch(err => {
        document.getElementById('content').innerHTML = `<p style="color:red;">Failed to load document. <a href="https://github.com/bobthegrownup/SowellianGovernance">View on GitHub</a></p>`;
      });
  </script>
</body>
</html>
